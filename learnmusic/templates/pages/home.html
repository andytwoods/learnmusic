{% extends "base.html" %}
{% load static %}

{% block css %}
  {{ block.super }}
  <style>
    #instrumentLevelButton {
      transition: background-color 0.3s, color 0.3s, opacity 0.3s; /* Smooth transitions */
      opacity: 0.5; /* Slightly transparent while disabled */
    }

    #instrumentLevelButton:disabled {
      background-color: #6c757d !important; /* Keep it gray while disabled */
      color: white !important; /* Text remains white for consistency */
      opacity: 0.5; /* Disabled button appears semi-transparent */
      cursor: not-allowed; /* Show disabled cursor */
    }

    #instrumentLevelButton:not(:disabled) {
      opacity: 1; /* Fully visible when enabled */
    }

     .tab-content {
      position: relative;
      overflow: hidden;
      height: 200px;
    }
    .tab-pane {
      position: absolute;
      width: 100%;
      top: 0;
      left: 0;
      transition: transform 0.5s ease, opacity 0.5s ease;
      opacity: 0;
      transform: translateX(100%);
      z-index: 0;
    }
    .tab-pane.slide-in-left {
      transform: translateX(0);
      opacity: 1;
      z-index: 1;
    }
    .tab-pane.slide-out-left {
      transform: translateX(-100%);
      opacity: 0;
      z-index: 0;
    }
    .tab-pane.slide-in-right {
      transform: translateX(0);
      opacity: 1;
      z-index: 1;
    }
    .tab-pane.slide-out-right {
      transform: translateX(100%);
      opacity: 0;
      z-index: 0;
    }
  </style>
{% endblock css %}

{% block body %}

  {% include 'navbar.html' %}

  {% include 'messages.html' %}

  <!-- Hero Section -->
  <section class="custom-lander text-white text-center py-5">
    <div class="overlay"></div>
    <div class="container position-relative">
      <h1 class="display-4">Master Your Notes, Master the Stage</h1>
      <p class="lead">A practice tool for musicians <b>at any stage</b> to improve their note recognition and playing
        skills—quickly and effectively.</p>
      <a href="#" class="btn btn-light btn-lg" style="text-shadow: none !important;">Get Started</a>
      <div class="pt-3" style="z-index: 10;">
        {% include 'phrase.html' %}
      </div>
      <div>Unless costs mount, will remain free

        <a class="text-white"
           href="https://github.com/andytwoods/learnmusic"
           target="_blank"
           data-bs-toggle="tooltip"
           data-bs-placement="bottom"
           title="MIT with Commons Clause License">
          <i class="fab fa-github me-2"></i>MIT-CC
        </a>
      </div>
    </div>


    <div class="container my-4">
      <div class="alert alert-warning d-flex align-items-center p-4" role="alert" style="text-shadow: none;">
        <div class="flex-shrink-0 me-3">
          <i class="fas fa-tools fa-3x" style="text-shadow: none;"></i>
        </div>
        <div style="text-shadow: none;">
          <h4 class="alert-heading mb-1" style="text-shadow: none;">Signup Currently Disabled</h4>
          <p class="mb-0">
            The app is not quite 'Minimum Viable Product' yet, but you can try out the demo below!
          </p>
        </div>
      </div>
    </div>


  </section>

  <section class="py-5">
    <div class="overlay"></div>
    <div class="container position-relative">
      <h2 class="text-center mb-4">How It Works</h2>
      <div class="row g-4">
        <div class="col-md-6 col-lg-3">
          <div class="card h-100 shadow-sm border-0 bg-light">
            <div class="card-body text-center">
              <div class="d-flex align-items-center justify-content-center mb-3">
                <i class="fas fa-calendar-check fa-2x text-primary me-3"></i>
                <h5 class="card-title mb-0">Daily exercises</h5>
              </div>
              <p class="card-text">Daily short exercises to strengthen the link between reading a note and playing it
                with the correct fingering.</p>
            </div>
          </div>
        </div>

        <div class="col-md-6 col-lg-3">
          <div class="card h-100 shadow-sm border-0 bg-light">
            <div class="card-body text-center">
              <div class="d-flex align-items-center justify-content-center mb-3">
                <i class="fas fa-chart-line fa-2x text-success me-3"></i>
                <h5 class="card-title mb-0">Progressive Learning</h5>
              </div>
              <p class="card-text">You'll start with common notes, then gradually move into new key signatures,
                accidentals, and more complex patterns.</p>
            </div>
          </div>
        </div>

        <div class="col-md-6 col-lg-3">
          <div class="card h-100 shadow-sm border-0 bg-light">
            <div class="card-body text-center">
              <div class="d-flex align-items-center justify-content-center mb-3">
                <i class="fas fa-trophy fa-2x text-warning me-3"></i>
                <h5 class="card-title mb-0">Advanced Challenges</h5>
              </div>
              <p class="card-text">Prefer a challenge? You can also practise transposing and other advanced skills to
                take your musicianship to the next level.</p>
            </div>
          </div>
        </div>

        <div class="col-md-6 col-lg-3">
          <div class="card h-100 shadow-sm border-0 bg-light">
            <div class="card-body text-center">
              <div class="d-flex align-items-center justify-content-center mb-3">
                <i class="fas fa-dumbbell fa-2x text-info me-3"></i>
                <h5 class="card-title mb-0">Muscle memory</h5>
              </div>
              <p class="card-text">Customise your user interface so it matches how you play your instrument. Your
                practice fine tunes muscle memory.</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <section class="py-5 bg-light">
    <div class="container">
      <div class="text-center mb-3">
        <h2 class="mb-3">Have a go now!</h2>
        <small>
          <ul class="list-unstyled mb-0">
            <li>
              <i class="fas fa-chevron-right fa-xs me-2"></i>See the <i class="fa-solid fa-edit"></i> menu to change
              instrument, difficulty, transposition...
            </li>
            <li>
              <i class="fas fa-chevron-right fa-xs me-2"></i>See <i class="fas fa-cog"></i> menu to move around user
              interface
            </li>
            <li>
              <i class="fas fa-chevron-right fa-xs me-2"></i>Do in a <a
              href="{% url 'practice-demo' %}"
              target="_blank">separate browser tab?</a>
            </li>
          </ul>
        </small>

      </div>

      <div id="iframe-container" class="overflow-hidden"></div>


      {{ instruments|json_script:"instruments-data" }}
      <script>
        document.addEventListener("DOMContentLoaded", function () {

          // Get the container where the iframe will be added
          const container = document.getElementById("iframe-container");

          // Clear any existing content in the container (optional)
          container.innerHTML = "";

          // Create the iframe element
          const iframe = document.createElement("iframe");

          // Set iframe attributes
          iframe.src = {% url 'practice-demo' %};
          iframe.style.width = "100%"; // Take the full width of the parent
          iframe.style.height = "100%"; // Take the full height of the parent
          iframe.style.border = "none"; // Remove the border for a clean look
          iframe.onload = function () {
            try {
              const iframeContent = iframe.contentWindow.document.body;
              iframe.style.height = iframeContent.scrollHeight + 120 + "px"; // Adjust the height based on content
            } catch (err) {
              console.error("Unable to adjust iframe height due to cross-origin restrictions:", err);
            }
          };
          // Append the iframe within the container
          container.appendChild(iframe);
        });
      </script>
    </div>
  </section>


  <div class="container py-4">
  <ul class="nav nav-tabs mb-3" id="carouselTabs" role="tablist">
    <li class="nav-item" role="presentation">
      <button class="nav-link active" data-index="0" data-bs-toggle="tab" data-bs-target="#tab1" type="button" role="tab">Slide 1</button>
    </li>
    <li class="nav-item" role="presentation">
      <button class="nav-link" data-index="1" data-bs-toggle="tab" data-bs-target="#tab2" type="button" role="tab">Slide 2</button>
    </li>
    <li class="nav-item" role="presentation">
      <button class="nav-link" data-index="2" data-bs-toggle="tab" data-bs-target="#tab3" type="button" role="tab">Slide 3</button>
    </li>
  </ul>

  <div class="tab-content" id="carouselTabsContent">
    <div class="tab-pane slide-in-left active" id="tab1" role="tabpanel">
      <div class="p-4 bg-light border">This is the content for Slide 1</div>
    </div>
    <div class="tab-pane" id="tab2" role="tabpanel">
      <div class="p-4 bg-light border">This is the content for Slide 2</div>
    </div>
    <div class="tab-pane" id="tab3" role="tabpanel">
      <div class="p-4 bg-light border">This is the content for Slide 3</div>
    </div>
  </div>
</div>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    const tabButtons = document.querySelectorAll('#carouselTabs button');
    let currentIndex = 0;

    // Initialize Bootstrap tabs
    const tabList = document.querySelector('#carouselTabs');
    const tabs = new bootstrap.Tab(tabList);

    // Handle tab show event (before the tab is shown)
    tabList.addEventListener('show.bs.tab', function(event) {
      const newTab = event.target;
      const newIndex = parseInt(newTab.getAttribute('data-index'));
      const tabPanes = document.querySelectorAll('.tab-pane');

      // Determine direction (left or right)
      const direction = newIndex > currentIndex ? 'right' : 'left';

      // Remove all animation classes first
      tabPanes.forEach(pane => {
        pane.classList.remove('slide-in-left', 'slide-out-left', 'slide-in-right', 'slide-out-right');
      });

      // Add appropriate animation classes
      if (direction === 'right') {
        // Current pane slides out to left
        tabPanes[currentIndex].classList.add('slide-out-left');
        // New pane slides in from right
        tabPanes[newIndex].classList.add('slide-in-right');
      } else {
        // Current pane slides out to right
        tabPanes[currentIndex].classList.add('slide-out-right');
        // New pane slides in from left
        tabPanes[newIndex].classList.add('slide-in-left');
      }

      // Update current index
      currentIndex = newIndex;
    });
  });
</script>

  <!-- Features Section -->
  <section id="features" class="py-5">
    <div class="container">
      <div class="text-center mb-4">
        <h2><a href="{% url 'account_signup' %}">Sign-up</a> for advanced features</h2>
      </div>
      <div class="row g-2">


        <div class="col-md-3">
          <div class="card h-100 shadow-sm border-0 bg-light">
            <div class="card-body text-center">
              <h5 class="card-title"><i class="fas fa-chart-bar"></i> Compare</h5>
              <p class="card-text">Where do you stand compared to others?</p>
            </div>
          </div>
        </div>
        <div class="col-md-3">
          <div class="card h-100 shadow-sm border-0 bg-light">
            <div class="card-body text-center">
              <h5 class="card-title"><i class="fas fa-chart-line"></i> Track</h5>
              <p class="card-text">Detailed insights and analytics on where to focus</p>
            </div>
          </div>
        </div>
        <div class="col-md-3">
          <div class="card h-100 shadow-sm border-0 bg-light">
            <div class="card-body text-center">
              <h5 class="card-title"><i class="fas fa-cloud-upload-alt"></i> Backup</h5>
              <p class="card-text">
                Data stored in securely and not in your browser's cache
            </div>
          </div>
        </div>
        <div class="col-md-3">
          <div class="card h-100 shadow-sm border-0 bg-light">
            <div class="card-body text-center">
              <h5 class="card-title"><i class="fas fa-flask"></i> Science</h5>
              <p class="card-text">
                Your anonymous data can be used to benefit all
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>
  <!-- Testimonials Section -->
  <section id="testimonials" class="bg-light py-5">
    <div class="container">
      <div class="text-center mb-4">
        <h2>What Users Say</h2>
        <p class="text-muted">Join thousands of musicians who’ve improved their skills!</p>
      </div>
      <div class="row">
        <div class="col-md-4">
          <blockquote class="blockquote">
            <p>"This app has transformed the way I practice trumpet notes"</p>
            <footer class="blockquote-footer">Sara T.</footer>
          </blockquote>
        </div>
        <div class="col-md-4">
          <blockquote class="blockquote">
            <p>"I’ve never been more confident playing the trombone. Thank you!"</p>
            <footer class="blockquote-footer">John D.</footer>
          </blockquote>
        </div>
        <div class="col-md-4">
          <blockquote class="blockquote">
            <p>"Perfect for beginners and experienced musicians alike"</p>
            <footer class="blockquote-footer">Anna K.</footer>
          </blockquote>
        </div>
      </div>
    </div>
  </section>


  {% include 'footer.html' %}

{% endblock body %}
